<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GÃ©nÃ©rateur de messages brise-glace</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 980px; margin: 24px auto; padding: 0 16px; }
    h1 { margin-bottom: 6px; }
    p { margin-top: 0; color: #444; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    label { display: block; font-weight: 600; margin-bottom: 6px; }
    input, select, textarea, button {
      width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ccc; box-sizing: border-box;
      font-size: 14px;
    }
    textarea { min-height: 140px; resize: vertical; }
    .card { background: #fafafa; border: 1px solid #eee; border-radius: 16px; padding: 14px; }
    .row { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .actions { display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
    button { cursor: pointer; border: none; background: #1f7a5b; color: #fff; font-weight: 700; }
    button.secondary { background: #444; }
    button.ghost { background: #eaeaea; color: #222; border: 1px solid #ddd; }
    .small { font-size: 12px; color: #666; }
    .full { grid-column: 1 / -1; }
    .hint { background: #fff6d8; border: 1px solid #ffe19a; padding: 10px; border-radius: 12px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    .pill { display:inline-block; padding:2px 8px; border-radius:999px; background:#e9f5ef; border:1px solid #cfe8dd; font-size:12px; color:#185a43; }
  </style>
</head>
<body>
  <h1>GÃ©nÃ©rateur de messages brise-glace</h1>
  <p>
    Niveau 2 : <span class="pill">Relances J+7 / J+14</span> + messages plus naturels.
  </p>

  <div class="grid">
    <div class="card">
      <div class="grid">
        <div>
          <label for="prenom">PrÃ©nom</label>
          <input id="prenom" placeholder="Ex: Julie" />
        </div>

        <div>
          <label for="plateforme">Plateforme</label>
          <select id="plateforme">
            <option>Instagram</option>
            <option>Facebook</option>
            <option>TikTok</option>
            <option>LinkedIn</option>
            <option>WhatsApp</option>
          </select>
        </div>

        <div>
          <label for="relation">Niveau de relation</label>
          <select id="relation">
            <option value="froid">Froid (on se connaÃ®t pas)</option>
            <option value="tiÃ¨de">TiÃ¨de (dÃ©jÃ  parlÃ©)</option>
            <option value="chaud">Chaud (bonne vibe)</option>
          </select>
        </div>

        <div>
          <label for="objectif">Objectif</label>
          <select id="objectif">
            <option value="discussion">Ouvrir la discussion</option>
            <option value="question">Poser une question simple</option>
            <option value="invitation">Inviter Ã  un appel / cafÃ© virtuel</option>
            <option value="relance7">Relance J+7</option>
            <option value="relance14">Relance J+14</option>
          </select>
        </div>

        <div class="full">
          <label for="dernier">Dernier contact (optionnel)</label>
          <input id="dernier" type="date" />
          <div class="small">Si tu mets une date, je te calcule le nombre de jours depuis le dernier contact.</div>
        </div>

        <div class="full">
          <label for="accroche">Accroche / contexte (optionnel)</label>
          <input id="accroche" placeholder="Ex: ta story / ton post sur le sport / ton voyage..." />
          <div class="small">Astuce : un dÃ©tail rÃ©el = message naturel.</div>
        </div>

        <div class="full">
          <label for="centre">Centres dâ€™intÃ©rÃªt (optionnel)</label>
          <input id="centre" placeholder="Ex: sport, famille, voyage, entrepreneuriat..." />
        </div>

        <div class="full hint">
          <strong>RÃ¨gle dâ€™or :</strong> dâ€™abord humain + curiositÃ©. Lâ€™invitation doit sentir le â€œÃ©changeâ€, pas le â€œpitchâ€.
        </div>

        <div class="full actions">
          <button id="btnGen">GÃ©nÃ©rer</button>
          <button class="ghost" id="btnRandom">ğŸ² Variante</button>
          <button class="ghost" id="btnRel7">Relance J+7</button>
          <button class="ghost" id="btnRel14">Relance J+14</button>
          <button class="secondary" id="btnClear">Effacer</button>
        </div>
      </div>
    </div>

    <div class="card">
      <label for="result">Message gÃ©nÃ©rÃ©</label>
      <textarea id="result" readonly></textarea>
      <div class="actions">
        <button class="ghost" id="btnCopy">Copier</button>
      </div>
      <div class="small" id="daysInfo"></div>
      <hr style="border:none;border-top:1px solid #eee;margin:12px 0;">
      <div class="small mono" id="debug"></div>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    function pick(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
    function clean(s) { return (s || "").trim(); }

    function daysSince(dateStr) {
      if (!dateStr) return null;
      const d = new Date(dateStr + "T00:00:00");
      const now = new Date();
      const ms = now - d;
      if (isNaN(ms)) return null;
      return Math.floor(ms / (1000 * 60 * 60 * 24));
    }

    function buildMessage({ prenom, plateforme, relation, objectif, accroche, centre, days }) {
      const hello = [
        `Salut ${prenom} !`,
        `Hello ${prenom} ğŸ‘‹`,
        `Coucou ${prenom} !`
      ];

      const introByRel = {
        froid: [
          `Je te dÃ©couvre sur ${plateforme} et je voulais te dire que jâ€™aime bien ton univers.`,
          `Je viens de voir ton contenu sur ${plateforme} et Ã§a mâ€™a donnÃ© envie de te parler.`,
          `Je tombe sur ton profil via ${plateforme} : vibe intÃ©ressante.`
        ],
        "tiÃ¨de": [
          `Ã‡a fait un moment ! Je suis retombÃ© sur ton profil et je me suis dit que je passais te dire bonjour.`,
          `Je repensais Ã  notre Ã©change, et je me suis dit que Ã§a valait le coup de reprendre contact.`,
          `Petit message rapide : je me suis dit â€œallez, je reprends des nouvellesâ€.`
        ],
        chaud: [
          `Hey ${prenom}, jâ€™espÃ¨re que tu vas bien ğŸ˜Š`,
          `Yo ${prenom} ! Petite pensÃ©e du jour ğŸ˜„`,
          `Hello toi ! Tu me diras comment tu vas ğŸ‘€`
        ]
      };

      const hook = accroche
        ? [
            `Jâ€™ai vu ${accroche} â€” Ã§a mâ€™a fait sourire.`,
            `Ton ${accroche} mâ€™a intriguÃ©.`,
            `Jâ€™ai vu ${accroche} et je me suis dit â€œok, stylÃ©â€.`
          ]
        : [
            `Au fait, quoi de neuf en ce moment ?`,
            `Tu deviens quoi ces temps-ci ?`,
            `Je passais juste prendre des nouvelles.`
          ];

      const interest = centre
        ? [
            `Au passage, tu es toujours Ã  fond sur ${centre} ?`,
            `Ã‡a avance tes trucs autour de ${centre} ?`,
            `Et niveau ${centre}, Ã§a dit quoi ?`
          ]
        : [
            `Tu es sur quoi en ce moment ?`,
            `Tu construis quoi de beau ces jours-ci ?`,
            `Quâ€™est-ce qui tâ€™occupe en ce moment ?`
          ];

      const goalDiscussion = [
        `Je ne voulais pas passer sans te saluer ğŸ™‚`,
        `Bref, je voulais juste te dire bonjour !`,
        `En tout cas, plaisir de te croiser ici.`
      ];

      const goalQuestion = [
        `Question rapide : câ€™est quoi ton focus du moment ?`,
        `Petite question : tu prÃ©fÃ¨res Ã©changer ici ou ailleurs ?`,
        `Je suis curieux : tu es plutÃ´t team projets perso, boulotâ€¦ ou les deux ?`
      ];

      const goalInvite = [
        `Si Ã§a te dit, on se cale 10 minutes cette semaine, juste pour papoter et prendre des nouvelles.`,
        `Si tu veux, on se fait un mini appel (10 min) tranquille, sans prise de tÃªte.`,
        `Ã‡a te chauffe un petit cafÃ© virtuel cette semaine ? 10 minutes, et basta ğŸ˜„`
      ];

      const relance7 = [
        `Je me permets une petite relance ğŸ™‚ Je voulais juste Ãªtre sÃ»r que tu avais vu mon message.`,
        `Petit follow-up (promis, pas insistant ğŸ˜„) : tu avais eu le temps de voir mon message ?`,
        `Je te relance vite fait, au cas oÃ¹ mon message se serait perdu dans la jungle de ${plateforme} ğŸ¥·`
      ];

      const relance14 = [
        `Je reviens vers toi une derniÃ¨re fois ğŸ™‚ Si câ€™est pas le bon moment, aucun souci.`,
        `Je ne veux pas spam, donc je fais une derniÃ¨re relance : si tu veux quâ€™on en parle, je suis dispo.`,
        `Dernier petit ping et aprÃ¨s je te laisse tranquille ğŸ˜„ Câ€™Ã©tait surtout pour prendre des nouvelles.`
      ];

      const outro = [
        `Bonne journÃ©e Ã  toi âœ¨`,
        `Ã€ bientÃ´t ğŸ™‚`,
        `Force Ã  toi ğŸ’ª`
      ];

      const intro = pick(introByRel[relation] || introByRel.froid);
      const middle = pick(hook) + " " + pick(interest);

      // Petite touche â€œcontextuelleâ€ : si on a une date
      const daysLine = (typeof days === "number")
        ? (days <= 3 ? `Au passage, je sais quâ€™on sâ€™est parlÃ© il nâ€™y a pas si longtemps.` :
           days <= 10 ? `Ã‡a fait dÃ©jÃ  quelques jours, je me suis dit que je repassais.` :
           `Ã‡a fait un petit moment, je me disais que Ã§a valait le coup de reprendre contact.`)
        : null;

      let goalLine = "";
      if (objectif === "discussion") goalLine = pick(goalDiscussion);
      if (objectif === "question") goalLine = pick(goalQuestion);
      if (objectif === "invitation") goalLine = pick(goalInvite);
      if (objectif === "relance7") goalLine = pick(relance7);
      if (objectif === "relance14") goalLine = pick(relance14);

      const parts = [
        pick(hello),
        "",
        intro,
        middle,
        daysLine ? daysLine : null,
        "",
        goalLine,
        "",
        pick(outro)
      ].filter(Boolean);

      return parts.join("\n");
    }

    function generate(forcedObjective=null) {
      const prenom = clean($("prenom").value) || "toi";
      const plateforme = $("plateforme").value;
      const relation = $("relation").value;
      const objectif = forcedObjective || $("objectif").value;
      const accroche = clean($("accroche").value);
      const centre = clean($("centre").value);
      const days = daysSince($("dernier").value);

      const msg = buildMessage({ prenom, plateforme, relation, objectif, accroche, centre, days });
      $("result").value = msg;

      $("debug").textContent =
        `paramÃ¨tres => prenom:${prenom} | plateforme:${plateforme} | relation:${relation} | objectif:${objectif}`;

      $("daysInfo").textContent =
        (typeof days === "number")
          ? `Dernier contact : il y a ${days} jour(s).`
          : `Astuce : ajoute une date pour contextualiser la relance.`;
    }

    $("btnGen").addEventListener("click", () => generate());
    $("btnRandom").addEventListener("click", () => generate());
    $("btnRel7").addEventListener("click", () => generate("relance7"));
    $("btnRel14").addEventListener("click", () => generate("relance14"));

    $("btnClear").addEventListener("click", () => {
      ["prenom","accroche","centre","dernier"].forEach(id => $(id).value = "");
      $("objectif").value = "discussion";
      $("result").value = "";
      $("debug").textContent = "";
      $("daysInfo").textContent = "";
      generate();
    });

    $("btnCopy").addEventListener("click", async () => {
      const text = $("result").value;
      if (!text) return;
      try {
        await navigator.clipboard.writeText(text);
        $("btnCopy").textContent = "CopiÃ© âœ…";
        setTimeout(() => $("btnCopy").textContent = "Copier", 900);
      } catch {
        alert("Copie impossible. SÃ©lectionne le texte et fais Ctrl+C.");
      }
    });

    generate();
  </script>
</body>
</html>
