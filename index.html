<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GÃ©nÃ©rateur de messages brise-glace</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 1040px; margin: 24px auto; padding: 0 16px; }
    h1 { margin-bottom: 6px; }
    p { margin-top: 0; color: #444; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    label { display: block; font-weight: 600; margin-bottom: 6px; }
    input, select, textarea, button {
      width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ccc; box-sizing: border-box;
      font-size: 14px;
    }
    textarea { min-height: 160px; resize: vertical; }
    .card { background: #fafafa; border: 1px solid #eee; border-radius: 16px; padding: 14px; }
    .actions { display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
    button { cursor: pointer; border: none; background: #1f7a5b; color: #fff; font-weight: 700; }
    button.secondary { background: #444; }
    button.ghost { background: #eaeaea; color: #222; border: 1px solid #ddd; }
    .small { font-size: 12px; color: #666; }
    .full { grid-column: 1 / -1; }
    .hint { background: #fff6d8; border: 1px solid #ffe19a; padding: 10px; border-radius: 12px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    .pill { display:inline-block; padding:2px 8px; border-radius:999px; background:#e9f5ef; border:1px solid #cfe8dd; font-size:12px; color:#185a43; }
  </style>
</head>
<body>
  <h1>GÃ©nÃ©rateur de messages brise-glace</h1>
  <p>
    Niveau 2 : <span class="pill">Anti-robot</span> (style + longueur) pour des messages plus naturels.
  </p>

  <div class="grid">
    <div class="card">
      <div class="grid">
        <div>
          <label for="prenom">PrÃ©nom</label>
          <input id="prenom" placeholder="Ex: Julie" />
        </div>

        <div>
          <label for="plateforme">Plateforme</label>
          <select id="plateforme">
            <option>Instagram</option>
            <option>Facebook</option>
            <option>TikTok</option>
            <option>LinkedIn</option>
            <option>WhatsApp</option>
          </select>
        </div>

        <div>
          <label for="relation">Niveau de relation</label>
          <select id="relation">
            <option value="froid">Froid (on se connaÃ®t pas)</option>
            <option value="tiÃ¨de">TiÃ¨de (dÃ©jÃ  parlÃ©)</option>
            <option value="chaud">Chaud (bonne vibe)</option>
          </select>
        </div>

        <div>
          <label for="objectif">Objectif</label>
          <select id="objectif">
            <option value="discussion">Ouvrir la discussion</option>
            <option value="question">Poser une question simple</option>
            <option value="invitation">Inviter Ã  un appel / cafÃ© virtuel</option>
            <option value="relance7">Relance J+7</option>
            <option value="relance14">Relance J+14</option>
          </select>
        </div>

        <div>
          <label for="styleTone">Style</label>
          <select id="styleTone">
            <option value="neutre">Neutre</option>
            <option value="pro">Pro</option>
            <option value="fun">Fun</option>
          </select>
        </div>

        <div>
          <label for="lengthMode">Longueur</label>
          <select id="lengthMode">
            <option value="court">Court</option>
            <option value="normal" selected>Normal</option>
            <option value="long">Long</option>
          </select>
        </div>

        <div class="full">
          <label for="dernier">Dernier contact (optionnel)</label>
          <input id="dernier" type="date" />
          <div class="small">Si tu mets une date, je contextualise automatiquement.</div>
        </div>

        <div class="full">
          <label for="accroche">Accroche / contexte (optionnel)</label>
          <input id="accroche" placeholder="Ex: ta story / ton post sur le sport / ton voyage..." />
          <div class="small">Astuce : un dÃ©tail rÃ©el = message naturel.</div>
        </div>

        <div class="full">
          <label for="centre">Centres dâ€™intÃ©rÃªt (optionnel)</label>
          <input id="centre" placeholder="Ex: sport, famille, voyage, entrepreneuriat..." />
        </div>

        <div class="full hint">
          <strong>Anti-robot :</strong> structure qui varie + phrases alternatives + longueur modulable.
        </div>

        <div class="full actions">
          <button id="btnGen">GÃ©nÃ©rer</button>
          <button class="ghost" id="btnRandom">ğŸ² Variante</button>
          <button class="ghost" id="btnRel7">Relance J+7</button>
          <button class="ghost" id="btnRel14">Relance J+14</button>
          <button class="secondary" id="btnClear">Effacer</button>
        </div>
      </div>
    </div>

    <div class="card">
      <label for="result">Message gÃ©nÃ©rÃ©</label>
      <textarea id="result" readonly></textarea>
      <div class="actions">
        <button class="ghost" id="btnCopy">Copier</button>
      </div>
      <div class="small" id="daysInfo"></div>
      <hr style="border:none;border-top:1px solid #eee;margin:12px 0;">
      <div class="small mono" id="debug"></div>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];
    const clean = (s) => (s || "").trim();

    function daysSince(dateStr) {
      if (!dateStr) return null;
      const d = new Date(dateStr + "T00:00:00");
      const now = new Date();
      const ms = now - d;
      if (isNaN(ms)) return null;
      return Math.floor(ms / (1000 * 60 * 60 * 24));
    }

    function tonePacks(style, plateforme, prenom) {
      // Petits â€œpacksâ€ selon style. On garde Ã§a simple mais efficace.
      const packs = {
        pro: {
          hello: [
            `Bonjour ${prenom},`,
            `Bonjour ${prenom} ğŸ‘‹`,
            `Hello ${prenom},`
          ],
          outro: [
            `Bonne journÃ©e,`,
            `Au plaisir dâ€™Ã©changer,`,
            `Bien Ã  vous,`
          ],
          emojis: false,
          funWords: []
        },
        neutre: {
          hello: [
            `Salut ${prenom} !`,
            `Hello ${prenom} ğŸ‘‹`,
            `Coucou ${prenom} !`
          ],
          outro: [
            `Bonne journÃ©e Ã  toi âœ¨`,
            `Ã€ bientÃ´t ğŸ™‚`,
            `Force Ã  toi ğŸ’ª`
          ],
          emojis: true,
          funWords: []
        },
        fun: {
          hello: [
            `Yo ${prenom} ğŸ˜„`,
            `Hey ${prenom} ğŸ‘‹`,
            `Coucou ${prenom} ğŸ˜„`
          ],
          outro: [
            `Belle journÃ©e Ã  toi âœ¨`,
            `Ã€ trÃ¨s vite ğŸ˜„`,
            `Force & good vibes ğŸ’ª`
          ],
          emojis: true,
          funWords: [
            `la jungle de ${plateforme}`,
            `le vortex des notifications`,
            `lâ€™algorithme farceur`
          ]
        }
      };
      return packs[style] || packs.neutre;
    }

    function buildMessage({ prenom, plateforme, relation, objectif, accroche, centre, days, style, lengthMode }) {
      const pack = tonePacks(style, plateforme, prenom);

      // Intros par relation
      const introByRel = {
        froid: {
          pro: [
            `Je me permets de vous Ã©crire aprÃ¨s Ãªtre tombÃ© sur votre profil sur ${plateforme}.`,
            `Je dÃ©couvre votre profil sur ${plateforme} et je souhaitais vous saluer.`,
            `Je viens de voir votre contenu sur ${plateforme} et je me permets un message.`
          ],
          neutre: [
            `Je te dÃ©couvre sur ${plateforme} et je voulais te dire que jâ€™aime bien ton univers.`,
            `Je viens de voir ton contenu sur ${plateforme} et Ã§a mâ€™a donnÃ© envie de te parler.`,
            `Je tombe sur ton profil via ${plateforme} : vibe intÃ©ressante.`
          ],
          fun: [
            `Je te dÃ©couvre sur ${plateforme} etâ€¦ ok, jâ€™avoue : Ã§a mâ€™a donnÃ© envie de te parler ğŸ˜„`,
            `Je viens de tomber sur ton profil sur ${plateforme} : lâ€™algorithme a bien bossÃ©.`,
            `Je passe par ${plateforme} et je me dis : â€œtiensâ€¦ Ã§a sent la bonne vibe ici.â€`
          ]
        },
        "tiÃ¨de": {
          pro: [
            `Je reviens vers vous, je me disais que cela valait le coup de reprendre contact.`,
            `Petit message pour reprendre des nouvelles depuis notre dernier Ã©change.`,
            `Je me permets de revenir vers vous suite Ã  notre prÃ©cÃ©dent Ã©change.`
          ],
          neutre: [
            `Ã‡a fait un moment ! Je suis retombÃ© sur ton profil et je me suis dit que je passais te dire bonjour.`,
            `Je repensais Ã  notre Ã©change, et je me suis dit que Ã§a valait le coup de reprendre contact.`,
            `Petit message rapide : je me suis dit â€œallez, je reprends des nouvellesâ€.`
          ],
          fun: [
            `Hey, Ã§a fait un petit moment ! Je reviens dans ta DM-zone ğŸ˜„`,
            `Je repasse te dire bonjour, parce que voilÃ  : jâ€™aime bien les bonnes vibes.`,
            `Je me suis dit : â€œallez, je reprends des nouvelles avant que lâ€™algorithme nous sÃ©pare.â€`
          ]
        },
        chaud: {
          pro: [
            `Jâ€™espÃ¨re que vous allez bien. Je me permets de prendre des nouvelles.`,
            `Jâ€™espÃ¨re que tout va bien de votre cÃ´tÃ©. Petit message rapide.`,
            `Bonjour, je passais simplement prendre des nouvelles.`
          ],
          neutre: [
            `Hey ${prenom}, jâ€™espÃ¨re que tu vas bien ğŸ˜Š`,
            `Yo ${prenom} ! Petite pensÃ©e du jour ğŸ˜„`,
            `Hello toi ! Tu me diras comment tu vas ğŸ‘€`
          ],
          fun: [
            `Yo ${prenom} ! Comment va la lÃ©gende ? ğŸ˜„`,
            `Hey toi ! Petit check-up vibe du jour ğŸ‘€`,
            `Coucou ! Je passe prendre des nouvelles, version ninja ğŸ¥·`
          ]
        }
      };

      // Hooks & interests
      const hook = accroche
        ? [
            `Jâ€™ai vu ${accroche} â€” Ã§a mâ€™a fait sourire.`,
            `Ton ${accroche} mâ€™a intriguÃ©.`,
            `Jâ€™ai vu ${accroche} et je me suis dit â€œok, stylÃ©â€.`
          ]
        : [
            `Au fait, quoi de neuf en ce moment ?`,
            `Tu deviens quoi ces temps-ci ?`,
            `Je passais juste prendre des nouvelles.`
          ];

      const interest = centre
        ? [
            `Au passage, tu es toujours Ã  fond sur ${centre} ?`,
            `Ã‡a avance tes trucs autour de ${centre} ?`,
            `Et niveau ${centre}, Ã§a dit quoi ?`
          ]
        : [
            `Tu es sur quoi en ce moment ?`,
            `Tu construis quoi de beau ces jours-ci ?`,
            `Quâ€™est-ce qui tâ€™occupe en ce moment ?`
          ];

      // Objectifs
      const goal = {
        discussion: {
          pro: [
            `Je voulais simplement vous saluer.`,
            `Je ne voulais pas passer sans vous dire bonjour.`,
            `Je vous souhaite une excellente journÃ©e.`
          ],
          neutre: [
            `Je ne voulais pas passer sans te saluer ğŸ™‚`,
            `Bref, je voulais juste te dire bonjour !`,
            `En tout cas, plaisir de te croiser ici.`
          ],
          fun: [
            `Bref : je passais dire bonjour, simple et efficace ğŸ˜„`,
            `Juste un petit coucou, pas de piÃ¨ge, pas de pitch ğŸ˜‡`,
            `Je passe prendre des nouvelles, et je repars sur la pointe des pieds ğŸ¥·`
          ]
        },
        question: {
          pro: [
            `Petite question : quel est votre focus du moment ?`,
            `Question rapide : vous prÃ©fÃ©rez Ã©changer ici ou ailleurs ?`,
            `Je suis curieux : sur quoi Ãªtes-vous concentrÃ© en ce moment ?`
          ],
          neutre: [
            `Question rapide : câ€™est quoi ton focus du moment ?`,
            `Petite question : tu prÃ©fÃ¨res Ã©changer ici ou ailleurs ?`,
            `Je suis curieux : tu es plutÃ´t team projets perso, boulotâ€¦ ou les deux ?`
          ],
          fun: [
            `Question flash âš¡ : ton focus du moment, câ€™est quoi ?`,
            `Tu es plutÃ´t team â€œprojetsâ€ ou team â€œmode chillâ€ en ce moment ? ğŸ˜„`,
            `Dis-moi : quâ€™est-ce qui te booste en ce moment ?`
          ]
        },
        invitation: {
          pro: [
            `Si vous Ãªtes disponible, on peut se caler 10 minutes cette semaine pour Ã©changer.`,
            `Si cela vous convient, je vous propose un court Ã©change (10 minutes) cette semaine.`,
            `Souhaitez-vous quâ€™on se planifie un bref appel pour faire connaissance ?`
          ],
          neutre: [
            `Si Ã§a te dit, on se cale 10 minutes cette semaine, juste pour papoter et prendre des nouvelles.`,
            `Si tu veux, on se fait un mini appel (10 min) tranquille, sans prise de tÃªte.`,
            `Ã‡a te chauffe un petit cafÃ© virtuel cette semaine ? 10 minutes, et basta ğŸ˜„`
          ],
          fun: [
            `On se cale 10 minutes cette semaine ? Version â€œpapotage propreâ€ ğŸ˜„`,
            `CafÃ© virtuel express ? 10 minutes et on repart chacun sauver le monde â˜•`,
            `Si tu veux, on se fait un mini call : 10 minutes, pas plus, parole de scout ğŸ«¡`
          ]
        },
        relance7: {
          pro: [
            `Je me permets une relance, au cas oÃ¹ mon message vous aurait Ã©chappÃ©.`,
            `Petit suivi : avez-vous eu le temps de voir mon message ?`,
            `Je reviens vers vous rapidement, au cas oÃ¹ cela se soit perdu.`
          ],
          neutre: [
            `Je me permets une petite relance ğŸ™‚ Je voulais juste Ãªtre sÃ»r que tu avais vu mon message.`,
            `Petit follow-up : tu avais eu le temps de voir mon message ?`,
            `Je te relance vite fait, au cas oÃ¹ mon message se serait perdu.`
          ],
          fun: [
            `Je relance en douceur ğŸ˜„ Mon message sâ€™est peut-Ãªtre perdu dans ${pick(pack.funWords.length? pack.funWords : [`${plateforme}`])}.`,
            `Petit ping ğŸ›ï¸ : tâ€™avais vu mon message ou lâ€™algorithme a fait le ninja ?`,
            `Mini relance, promis je ne spam pas ğŸ˜‡`
          ]
        },
        relance14: {
          pro: [
            `Je reviens une derniÃ¨re fois : si ce nâ€™est pas le bon moment, aucun souci.`,
            `Dernier message de suivi : je vous laisse revenir vers moi si besoin.`,
            `Je ne souhaite pas insister : je vous laisse vers moi si vous le souhaitez.`
          ],
          neutre: [
            `Je reviens vers toi une derniÃ¨re fois ğŸ™‚ Si câ€™est pas le bon moment, aucun souci.`,
            `Je ne veux pas spam, donc je fais une derniÃ¨re relance : si tu veux quâ€™on en parle, je suis dispo.`,
            `Dernier petit ping et aprÃ¨s je te laisse tranquille ğŸ˜„`
          ],
          fun: [
            `Dernier petit ping et aprÃ¨s je disparais dans la fumÃ©e ğŸ¥·ğŸ’¨`,
            `Je fais ma derniÃ¨re relance et aprÃ¨s je te laisse respirer ğŸ˜„`,
            `Promis : derniÃ¨re relance. Ensuite, je redeviens un personnage secondaire ğŸ˜„`
          ]
        }
      };

      const styleKey = (style === "pro" ? "pro" : style === "fun" ? "fun" : "neutre");

      const intro = pick(introByRel[relation]?.[styleKey] || introByRel.froid.neutre);

      const daysLine = (typeof days === "number")
        ? (days <= 3 ? (styleKey==="pro" ? `Nous avons Ã©changÃ© rÃ©cemment, je me permets un petit message.` : `Je sais quâ€™on sâ€™est parlÃ© rÃ©cemment, je repasse vite fait.`)
           : days <= 10 ? (styleKey==="pro" ? `Je me permets de revenir vers vous aprÃ¨s quelques jours.` : `Ã‡a fait dÃ©jÃ  quelques jours, je me suis dit que je repassais.`)
           : (styleKey==="pro" ? `Cela fait un moment, je me permets de reprendre contact.` : `Ã‡a fait un petit moment, je me disais que Ã§a valait le coup de reprendre contact.`))
        : null;

      const goalLine = pick(goal[objectif]?.[styleKey] || goal.discussion.neutre);

      const outro = pick(pack.outro);

      // Longueur : on module le nombre de â€œblocsâ€
      // court => intro + goal
      // normal => intro + hook+interest + goal
      // long => intro + hook+interest + daysLine + mini-phrase + goal
      const hookLine = pick(hook);
      const interestLine = pick(interest);

      const fillerLong = {
        pro: [
          `Je prÃ©fÃ¨re un Ã©change simple et direct.`,
          `Rien dâ€™urgent, câ€™est surtout pour garder le contact.`,
          `Je reste flexible selon vos disponibilitÃ©s.`
        ],
        neutre: [
          `Je suis en mode â€œprendre des nouvellesâ€, tout simplement.`,
          `Rien dâ€™urgent, câ€™est juste pour garder le lien.`,
          `Et si câ€™est pas le bon moment, aucun souci.`
        ],
        fun: [
          `Je viens en paix ğŸ˜„`,
          `Promis, pas de â€œscript robotâ€ ici ğŸ¤–âŒ`,
          `Je passe juste pour la vibe.`
        ]
      };

      const lines = [];
      // Salutation
      lines.push(pick(pack.hello));
      lines.push("");

      if (lengthMode === "court") {
        lines.push(intro);
        lines.push("");
        lines.push(goalLine);
        lines.push("");
        lines.push(outro);
        return lines.join("\n");
      }

      if (lengthMode === "normal") {
        lines.push(intro);
        // Variation de structure : parfois hook puis interest, parfois lâ€™inverse
        if (Math.random() < 0.5) {
          lines.push(hookLine);
          lines.push(interestLine);
        } else {
          lines.push(interestLine);
          lines.push(hookLine);
        }
        lines.push("");
        lines.push(goalLine);
        lines.push("");
        lines.push(outro);
        return lines.join("\n");
      }

      // long
      lines.push(intro);
      // Variation de structure
      const order = Math.random() < 0.5 ? [hookLine, interestLine] : [interestLine, hookLine];
      lines.push(order[0]);
      lines.push(order[1]);
      if (daysLine) lines.push(daysLine);
      lines.push(pick(fillerLong[styleKey]));
      lines.push("");
      lines.push(goalLine);
      lines.push("");
      lines.push(outro);
      return lines.join("\n");
    }

    function generate(forcedObjective=null) {
      const prenom = clean($("prenom").value) || "toi";
      const plateforme = $("plateforme").value;
      const relation = $("relation").value;
      const objectif = forcedObjective || $("objectif").value;
      const style = $("styleTone").value;
      const lengthMode = $("lengthMode").value;
      const accroche = clean($("accroche").value);
      const centre = clean($("centre").value);
      const days = daysSince($("dernier").value);

      const msg = buildMessage({ prenom, plateforme, relation, objectif, accroche, centre, days, style, lengthMode });
      $("result").value = msg;

      $("debug").textContent =
        `paramÃ¨tres => prenom:${prenom} | plateforme:${plateforme} | relation:${relation} | objectif:${objectif} | style:${style} | longueur:${lengthMode}`;

      $("daysInfo").textContent =
        (typeof days === "number")
          ? `Dernier contact : il y a ${days} jour(s).`
          : `Astuce : ajoute une date pour contextualiser.`;
    }

    $("btnGen").addEventListener("click", () => generate());
    $("btnRandom").addEventListener("click", () => generate());
    $("btnRel7").addEventListener("click", () => generate("relance7"));
    $("btnRel14").addEventListener("click", () => generate("relance14"));

    $("btnClear").addEventListener("click", () => {
      ["prenom","accroche","centre","dernier"].forEach(id => $(id).value = "");
      $("objectif").value = "discussion";
      $("styleTone").value = "neutre";
      $("lengthMode").value = "normal";
      $("result").value = "";
      $("debug").textContent = "";
      $("daysInfo").textContent = "";
      generate();
    });

    $("btnCopy").addEventListener("click", async () => {
      const text = $("result").value;
      if (!text) return;
      try {
        await navigator.clipboard.writeText(text);
        $("btnCopy").textContent = "CopiÃ© âœ…";
        setTimeout(() => $("btnCopy").textContent = "Copier", 900);
      } catch {
        alert("Copie impossible. SÃ©lectionne le texte et fais Ctrl+C.");
      }
    });

    generate();
  </script>
</body>
</html>
