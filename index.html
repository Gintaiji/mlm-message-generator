<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GÃ©nÃ©rateur de messages brise-glace</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 1100px; margin: 24px auto; padding: 0 16px; }
    h1 { margin-bottom: 6px; }
    p { margin-top: 0; color: #444; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    label { display: block; font-weight: 600; margin-bottom: 6px; }
    input, select, textarea, button {
      width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ccc; box-sizing: border-box;
      font-size: 14px;
    }
    textarea { min-height: 180px; resize: vertical; }
    .card { background: #fafafa; border: 1px solid #eee; border-radius: 16px; padding: 14px; }
    .actions { display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap; }
    button { cursor: pointer; border: none; background: #1f7a5b; color: #fff; font-weight: 700; }
    button.secondary { background: #444; }
    button.ghost { background: #eaeaea; color: #222; border: 1px solid #ddd; }
    .small { font-size: 12px; color: #666; }
    .full { grid-column: 1 / -1; }
    .hint { background: #fff6d8; border: 1px solid #ffe19a; padding: 10px; border-radius: 12px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    .pill { display:inline-block; padding:2px 8px; border-radius:999px; background:#e9f5ef; border:1px solid #cfe8dd; font-size:12px; color:#185a43; }
  </style>
</head>
<body>
  <h1>GÃ©nÃ©rateur de messages brise-glace</h1>
  <p>
    Niveau 3 : <span class="pill">Profil + Intention</span> + invitation Ã©lÃ©gante (zÃ©ro pitch).
  </p>

  <div class="grid">
    <div class="card">
      <div class="grid">
        <div>
          <label for="prenom">PrÃ©nom</label>
          <input id="prenom" placeholder="Ex: Julie" />
        </div>

        <div>
          <label for="plateforme">Plateforme</label>
          <select id="plateforme">
            <option>Instagram</option>
            <option>Facebook</option>
            <option>TikTok</option>
            <option>LinkedIn</option>
            <option>WhatsApp</option>
          </select>
        </div>

        <div>
          <label for="relation">Niveau de relation</label>
          <select id="relation">
            <option value="froid">Froid (on se connaÃ®t pas)</option>
            <option value="tiÃ¨de">TiÃ¨de (dÃ©jÃ  parlÃ©)</option>
            <option value="chaud">Chaud (bonne vibe)</option>
          </select>
        </div>

        <div>
          <label for="objectif">Objectif</label>
          <select id="objectif">
            <option value="discussion">Ouvrir la discussion</option>
            <option value="question">Poser une question simple</option>
            <option value="invitation">Inviter Ã  un appel / cafÃ© virtuel</option>
            <option value="relance7">Relance J+7</option>
            <option value="relance14">Relance J+14</option>
          </select>
        </div>

        <div>
          <label for="styleTone">Style</label>
          <select id="styleTone">
            <option value="neutre">Neutre</option>
            <option value="pro">Pro</option>
            <option value="fun">Fun</option>
          </select>
        </div>

        <div>
          <label for="lengthMode">Longueur</label>
          <select id="lengthMode">
            <option value="court">Court</option>
            <option value="normal" selected>Normal</option>
            <option value="long">Long</option>
          </select>
        </div>

        <div>
          <label for="persona">Type de personne</label>
          <select id="persona">
            <option value="entrepreneur">Entrepreneur / business</option>
            <option value="parent">Parent / famille</option>
            <option value="sportif">Sportif / santÃ©</option>
            <option value="voyage">Voyage / lifestyle</option>
            <option value="etudiant">Ã‰tudiant / dÃ©but de carriÃ¨re</option>
            <option value="createur">CrÃ©ateur / contenu</option>
            <option value="job">SalariÃ© / carriÃ¨re</option>
            <option value="indefini" selected>IndÃ©fini (gÃ©nÃ©ral)</option>
          </select>
        </div>

        <div>
          <label for="intention">Intention</label>
          <select id="intention">
            <option value="reseau" selected>RÃ©seau / discuter</option>
            <option value="opportunite">OpportunitÃ© (soft)</option>
            <option value="collab">Collab / projet</option>
            <option value="curiosite">CuriositÃ© / apprendre</option>
          </select>
        </div>

        <div class="full">
          <label for="dernier">Dernier contact (optionnel)</label>
          <input id="dernier" type="date" />
          <div class="small">Si tu mets une date, je contextualise automatiquement.</div>
        </div>

        <div class="full">
          <label for="accroche">Accroche / contexte (optionnel)</label>
          <input id="accroche" placeholder="Ex: ta story / ton post sur le sport / ton voyage..." />
          <div class="small">Astuce : un dÃ©tail rÃ©el = message naturel.</div>
        </div>

        <div class="full">
          <label for="centre">Centres dâ€™intÃ©rÃªt (optionnel)</label>
          <input id="centre" placeholder="Ex: sport, famille, voyage, entrepreneuriat..." />
        </div>

        <div class="full hint">
          <strong>Pro tip :</strong> Lâ€™intention â€œOpportunitÃ© (soft)â€ ne vend rien : elle ouvre une porte polie.
        </div>

        <div class="full actions">
          <button id="btnGen">GÃ©nÃ©rer</button>
          <button class="ghost" id="btnRandom">ğŸ² Variante</button>
          <button class="ghost" id="btnRel7">Relance J+7</button>
          <button class="ghost" id="btnRel14">Relance J+14</button>
          <button class="secondary" id="btnClear">Effacer</button>
        </div>
      </div>
    </div>

    <div class="card">
      <label for="result">Message gÃ©nÃ©rÃ©</label>
      <textarea id="result" readonly></textarea>
      <div class="actions">
        <button class="ghost" id="btnCopy">Copier</button>
      </div>
      <div class="small" id="daysInfo"></div>
      <hr style="border:none;border-top:1px solid #eee;margin:12px 0;">
      <div class="small mono" id="debug"></div>
    </div>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);
    const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];
    const clean = (s) => (s || "").trim();

    function daysSince(dateStr) {
      if (!dateStr) return null;
      const d = new Date(dateStr + "T00:00:00");
      const now = new Date();
      const ms = now - d;
      if (isNaN(ms)) return null;
      return Math.floor(ms / (1000 * 60 * 60 * 24));
    }

    function tonePacks(style, plateforme, prenom) {
      const packs = {
        pro: {
          hello: [`Bonjour ${prenom},`, `Bonjour ${prenom} ğŸ‘‹`, `Hello ${prenom},`],
          outro: [`Bonne journÃ©e,`, `Au plaisir dâ€™Ã©changer,`, `Bien Ã  vous,`]
        },
        neutre: {
          hello: [`Salut ${prenom} !`, `Hello ${prenom} ğŸ‘‹`, `Coucou ${prenom} !`],
          outro: [`Bonne journÃ©e Ã  toi âœ¨`, `Ã€ bientÃ´t ğŸ™‚`, `Force Ã  toi ğŸ’ª`]
        },
        fun: {
          hello: [`Yo ${prenom} ğŸ˜„`, `Hey ${prenom} ğŸ‘‹`, `Coucou ${prenom} ğŸ˜„`],
          outro: [`Belle journÃ©e Ã  toi âœ¨`, `Ã€ trÃ¨s vite ğŸ˜„`, `Force & good vibes ğŸ’ª`],
          funWords: [`la jungle de ${plateforme}`, `le vortex des notifications`, `lâ€™algorithme farceur`]
        }
      };
      return packs[style] || packs.neutre;
    }

    function personaLines(persona, styleKey, centre) {
      const c = centre ? ` (${centre})` : "";
      const map = {
        entrepreneur: {
          pro: [`Jâ€™aime bien Ã©changer avec des personnes orientÃ©es projets et rÃ©sultats.`],
          neutre: [`Jâ€™aime bien connecter avec des gens qui construisent des projets.`],
          fun: [`Jâ€™aime les gens qui build des trucs, Ã§a me motive ğŸ˜„`]
        },
        parent: {
          pro: [`Je trouve toujours intÃ©ressant dâ€™Ã©changer avec des personnes qui jonglent avec la vie de famille.`],
          neutre: [`Respect Ã  ceux qui gÃ¨rent la famille et mille choses en mÃªme temps.`],
          fun: [`Team â€œmulti-tÃ¢ches ultimeâ€, respect ğŸ˜„`]
        },
        sportif: {
          pro: [`Je mâ€™intÃ©resse beaucoup Ã  la discipline et aux habitudes qui font progresser.`],
          neutre: [`Jâ€™aime bien les vibes sport / santÃ©, Ã§a donne une Ã©nergie diffÃ©rente.`],
          fun: [`Team progression + sueur + bonne humeur ğŸ˜„`]
        },
        voyage: {
          pro: [`Jâ€™apprÃ©cie les profils curieux et ouverts, surtout autour du voyage.`],
          neutre: [`Les profils voyage/lifestyle, Ã§a donne envie de bouger.`],
          fun: [`Attention, ton contenu donne envie de prendre un billet ğŸ˜„`]
        },
        etudiant: {
          pro: [`Jâ€™aime bien Ã©changer avec des personnes en phase de construction (Ã©tudes/dÃ©but de carriÃ¨re).`],
          neutre: [`Jâ€™aime bien connecter avec des gens qui dÃ©marrent et se construisent.`],
          fun: [`La pÃ©riode â€œje construis mon futurâ€, grosse Ã©nergie ğŸ˜„`]
        },
        createur: {
          pro: [`Je respecte beaucoup la constance et la crÃ©ativitÃ© dans le contenu.`],
          neutre: [`Jâ€™aime bien les crÃ©ateurs : on sent la patte et la rÃ©gularitÃ©.`],
          fun: [`CrÃ©ateur = respect. Câ€™est un sport de haut niveau ğŸ˜„`]
        },
        job: {
          pro: [`Je trouve intÃ©ressant dâ€™Ã©changer sur les objectifs et lâ€™Ã©volution professionnelle.`],
          neutre: [`Jâ€™aime bien parler objectifs, organisation, Ã©volution.`],
          fun: [`Team â€œon progresse sans se cramerâ€, jâ€™aime bien ğŸ˜„`]
        },
        indefini: {
          pro: [`Je suis toujours partant pour un Ã©change simple et humain.`],
          neutre: [`Jâ€™aime bien les Ã©changes simples, humains.`],
          fun: [`Je passe pour la vibe, simple ğŸ˜„`]
        }
      };
      const block = map[persona] || map.indefini;
      return pick(block[styleKey] || block.neutre);
    }

    function buildMessage(params) {
      const {
        prenom, plateforme, relation, objectif, accroche, centre, days,
        style, lengthMode, persona, intention
      } = params;

      const pack = tonePacks(style, plateforme, prenom);
      const styleKey = (style === "pro" ? "pro" : style === "fun" ? "fun" : "neutre");

      const introByRel = {
        froid: {
          pro: [
            `Je me permets de vous Ã©crire aprÃ¨s Ãªtre tombÃ© sur votre profil sur ${plateforme}.`,
            `Je dÃ©couvre votre profil sur ${plateforme} et je souhaitais vous saluer.`
          ],
          neutre: [
            `Je te dÃ©couvre sur ${plateforme} et je voulais te dire que jâ€™aime bien ton univers.`,
            `Je viens de voir ton contenu sur ${plateforme} et Ã§a mâ€™a donnÃ© envie de te parler.`
          ],
          fun: [
            `Je viens de tomber sur ton profil sur ${plateforme} : lâ€™algorithme a bien bossÃ© ğŸ˜„`,
            `Je passe par ${plateforme} et je me dis : â€œokâ€¦ vibe intÃ©ressante ici.â€`
          ]
        },
        "tiÃ¨de": {
          pro: [
            `Je reviens vers vous, je me disais que cela valait le coup de reprendre contact.`,
            `Petit message pour reprendre des nouvelles depuis notre dernier Ã©change.`
          ],
          neutre: [
            `Ã‡a fait un moment ! Je repasse te dire bonjour.`,
            `Je repensais Ã  notre Ã©change, et je me suis dit que Ã§a valait le coup de reprendre contact.`
          ],
          fun: [
            `Hey, je reviens dans ta DM-zone ğŸ˜„`,
            `Je repasse prendre des nouvelles avant que lâ€™algorithme nous sÃ©pare ğŸ˜„`
          ]
        },
        chaud: {
          pro: [
            `Jâ€™espÃ¨re que vous allez bien. Je me permets de prendre des nouvelles.`,
            `Bonjour, je passais simplement prendre des nouvelles.`
          ],
          neutre: [
            `Hey ${prenom}, jâ€™espÃ¨re que tu vas bien ğŸ˜Š`,
            `Yo ${prenom} ! Petite pensÃ©e du jour ğŸ˜„`
          ],
          fun: [
            `Yo ${prenom} ! Comment va la lÃ©gende ? ğŸ˜„`,
            `Petit check-up vibe du jour ğŸ‘€`
          ]
        }
      };

      const hook = accroche
        ? [`Jâ€™ai vu ${accroche} â€” Ã§a mâ€™a fait sourire.`, `Ton ${accroche} mâ€™a intriguÃ©.`]
        : [`Au fait, quoi de neuf en ce moment ?`, `Tu deviens quoi ces temps-ci ?`];

      const interest = centre
        ? [`Tu es toujours Ã  fond sur ${centre} ?`, `Ã‡a avance tes trucs autour de ${centre} ?`]
        : [`Tu es sur quoi en ce moment ?`, `Quâ€™est-ce qui tâ€™occupe ces jours-ci ?`];

      const daysLine = (typeof days === "number")
        ? (days <= 3 ? (styleKey==="pro" ? `Nous avons Ã©changÃ© rÃ©cemment, je me permets un petit message.` : `On sâ€™est parlÃ© rÃ©cemment, je repasse vite fait.`)
           : days <= 10 ? (styleKey==="pro" ? `Je me permets de revenir vers vous aprÃ¨s quelques jours.` : `Ã‡a fait quelques jours, je me suis dit que je repassais.`)
           : (styleKey==="pro" ? `Cela fait un moment, je me permets de reprendre contact.` : `Ã‡a fait un petit moment, je me disais que Ã§a valait le coup.`))
        : null;

      const relance7 = {
        pro: [`Je me permets une relance, au cas oÃ¹ mon message vous aurait Ã©chappÃ©.`],
        neutre: [`Petite relance ğŸ™‚ Tu avais eu le temps de voir mon message ?`],
        fun: [`Petit ping ğŸ›ï¸ : lâ€™algorithme a fait le ninja ou tu avais vu ? ğŸ˜„`]
      };

      const relance14 = {
        pro: [`Je reviens une derniÃ¨re fois : si ce nâ€™est pas le bon moment, aucun souci.`],
        neutre: [`DerniÃ¨re relance ğŸ™‚ Si ce nâ€™est pas le moment, aucun souci.`],
        fun: [`Dernier petit ping et aprÃ¨s je disparais dans la fumÃ©e ğŸ¥·ğŸ’¨`]
      };

      const invitationSoft = {
        reseau: {
          pro: [`Si vous le souhaitez, on peut Ã©changer quelques minutes, simplement pour faire connaissance.`],
          neutre: [`Si Ã§a te dit, on se cale 10 minutes pour papoter et faire connaissance.`],
          fun: [`On se cale 10 minutes ? Version papotage propre ğŸ˜„`]
        },
        opportunite: {
          pro: [
            `Jâ€™ai un sujet qui pourrait vous intÃ©resser. Si vous Ãªtes ouvert, on peut en parler 10 minutes, sans engagement.`,
            `Jâ€™ai une idÃ©e/opportunitÃ© que je partage parfois Ã  des personnes qui ont votre profil. Si vous Ãªtes curieux, je vous explique.`
          ],
          neutre: [
            `Jâ€™ai un truc qui pourrait te plaire (rien dâ€™agressif). Si tâ€™es curieux, je tâ€™explique en 10 minutes.`,
            `Jâ€™ai une idÃ©e/opportunitÃ© que je partage Ã  quelques personnes. Si Ã§a tâ€™intrigue, je peux tâ€™en dire plus.`
          ],
          fun: [
            `Jâ€™ai un petit truc Ã  te partager. Pas un pitch de robot ğŸ˜„ Si tâ€™es curieux, 10 minutes et câ€™est pliÃ©.`,
            `Jâ€™ai une idÃ©e Ã  te proposer. Si tu dis â€œpourquoi pasâ€, je tâ€™explique vite fait ğŸ˜„`
          ]
        },
        collab: {
          pro: [`Je pensais Ã  une possible collaboration/Ã©change dâ€™idÃ©es. Si cela vous intÃ©resse, on peut en parler.`],
          neutre: [`Je me disais quâ€™on pourrait Ã©changer sur un projet / une collab possible.`],
          fun: [`Je sens quâ€™il y a une vibe â€œcollabâ€ possible ğŸ˜„ On en parle ?`]
        },
        curiosite: {
          pro: [`Je suis curieux dâ€™en savoir plus sur ce que vous faites en ce moment.`],
          neutre: [`Je suis curieux : tu construis quoi en ce moment ?`],
          fun: [`Je suis curieux : tu build quoi en ce moment ? ğŸ˜„`]
        }
      };

      const goals = {
        discussion: {
          pro: [`Je voulais simplement vous saluer.`],
          neutre: [`Je ne voulais pas passer sans te saluer ğŸ™‚`],
          fun: [`Je passais dire bonjour, simple et efficace ğŸ˜„`]
        },
        question: {
          pro: [`Petite question : quel est votre focus du moment ?`],
          neutre: [`Question rapide : ton focus du moment, câ€™est quoi ?`],
          fun: [`Question flash âš¡ : ton focus du moment, câ€™est quoi ?`]
        },
        invitation: invitationSoft[intention][styleKey],
        relance7: relance7[styleKey],
        relance14: relance14[styleKey]
      };

      const intro = pick(introByRel[relation]?.[styleKey] || introByRel.froid.neutre);
      const personaLine = personaLines(persona, styleKey, centre);

      // Longueur : court / normal / long
      const lines = [];
      lines.push(pick(pack.hello));
      lines.push("");

      if (lengthMode === "court") {
        lines.push(intro);
        lines.push(personaLine);
        lines.push("");
        lines.push(pick(goals[objectif]));
        lines.push("");
        lines.push(pick(pack.outro));
        return lines.join("\n");
      }

      if (lengthMode === "normal") {
        lines.push(intro);
        // Variation
        if (Math.random() < 0.5) {
          lines.push(pick(hook));
          lines.push(pick(interest));
        } else {
          lines.push(pick(interest));
          lines.push(pick(hook));
        }
        lines.push(personaLine);
        if (daysLine) lines.push(daysLine);
        lines.push("");
        lines.push(pick(goals[objectif]));
        lines.push("");
        lines.push(pick(pack.outro));
        return lines.join("\n");
      }

      // long
      lines.push(intro);
      lines.push(pick(hook));
      lines.push(pick(interest));
      lines.push(personaLine);
      if (daysLine) lines.push(daysLine);

      // Mini phrase â€œhumanâ€
      const human = {
        pro: [`Rien dâ€™urgent, câ€™est surtout pour garder un contact simple.`],
        neutre: [`Rien dâ€™urgent, câ€™est juste pour garder le lien.`],
        fun: [`Promis, pas de script robot ici ğŸ¤–âŒ`]
      };
      lines.push(pick(human[styleKey]));
      lines.push("");
      lines.push(pick(goals[objectif]));
      lines.push("");
      lines.push(pick(pack.outro));
      return lines.join("\n");
    }

    function generate(forcedObjective=null) {
      const prenom = clean($("prenom").value) || "toi";
      const plateforme = $("plateforme").value;
      const relation = $("relation").value;
      const objectif = forcedObjective || $("objectif").value;

      const style = $("styleTone").value;
      const lengthMode = $("lengthMode").value;
      const persona = $("persona").value;
      const intention = $("intention").value;

      const accroche = clean($("accroche").value);
      const centre = clean($("centre").value);
      const days = daysSince($("dernier").value);

      const msg = buildMessage({
        prenom, plateforme, relation, objectif,
        accroche, centre, days, style, lengthMode,
        persona, intention
      });

      $("result").value = msg;

      $("debug").textContent =
        `params => prenom:${prenom} | plateforme:${plateforme} | relation:${relation} | objectif:${objectif} | style:${style} | longueur:${lengthMode} | persona:${persona} | intention:${intention}`;

      $("daysInfo").textContent =
        (typeof days === "number")
          ? `Dernier contact : il y a ${days} jour(s).`
          : `Astuce : ajoute une date pour contextualiser.`;
    }

    $("btnGen").addEventListener("click", () => generate());
    $("btnRandom").addEventListener("click", () => generate());
    $("btnRel7").addEventListener("click", () => generate("relance7"));
    $("btnRel14").addEventListener("click", () => generate("relance14"));

    $("btnClear").addEventListener("click", () => {
      ["prenom","accroche","centre","dernier"].forEach(id => $(id).value = "");
      $("objectif").value = "discussion";
      $("styleTone").value = "neutre";
      $("lengthMode").value = "normal";
      $("persona").value = "indefini";
      $("intention").value = "reseau";
      $("result").value = "";
      $("debug").textContent = "";
      $("daysInfo").textContent = "";
      generate();
    });

    $("btnCopy").addEventListener("click", async () => {
      const text = $("result").value;
      if (!text) return;
      try {
        await navigator.clipboard.writeText(text);
        $("btnCopy").textContent = "CopiÃ© âœ…";
        setTimeout(() => $("btnCopy").textContent = "Copier", 900);
      } catch {
        alert("Copie impossible. SÃ©lectionne le texte et fais Ctrl+C.");
      }
    });

    generate();
  </script>
</body>
</html>
